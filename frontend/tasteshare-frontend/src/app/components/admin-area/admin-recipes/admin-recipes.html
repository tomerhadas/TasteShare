<div class="admin-recipes">
  <h2>ניהול מתכונים</h2>

  <div *ngIf="loading" class="loading">
    <mat-spinner diameter="40"></mat-spinner>
    <span>טוען מתכונים...</span>
  </div>

  <div *ngIf="error" class="error-message">{{ error }}</div>

  <table
    *ngIf="!loading && recipes.length > 0"
    mat-table
    [dataSource]="recipes"
    class="recipes-table"
  >
    <!-- ID Column -->
    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef>מזהה</th>
      <td mat-cell *matCellDef="let recipe">{{ recipe.id }}</td>
    </ng-container>

    <!-- Title Column -->
    <ng-container matColumnDef="title">
      <th mat-header-cell *matHeaderCellDef>שם המתכון</th>
      <td mat-cell *matCellDef="let recipe">
        <span class="recipe-title">{{ recipe.title }}</span>
      </td>
    </ng-container>

    <!-- Food Type Column -->
    <ng-container matColumnDef="foodType">
      <th mat-header-cell *matHeaderCellDef>סוג</th>
      <td mat-cell *matCellDef="let recipe">
        <mat-chip [ngClass]="getFoodTypeClass(recipe.foodType)">
          {{ getFoodTypeLabel(recipe.foodType) }}
        </mat-chip>
      </td>
    </ng-container>

    <!-- Difficulty Column -->
    <ng-container matColumnDef="difficulty">
      <th mat-header-cell *matHeaderCellDef>רמת קושי</th>
      <td mat-cell *matCellDef="let recipe">
        <mat-chip [ngClass]="getDifficultyClass(recipe.difficulty)">
          {{ getDifficultyLabel(recipe.difficulty) }}
        </mat-chip>
      </td>
    </ng-container>

    <!-- Author Column -->
    <ng-container matColumnDef="authorName">
      <th mat-header-cell *matHeaderCellDef>יוצר</th>
      <td mat-cell *matCellDef="let recipe">{{ recipe.authorName }}</td>
    </ng-container>

    <!-- View Count Column -->
    <ng-container matColumnDef="viewCount">
      <th mat-header-cell *matHeaderCellDef>צפיות</th>
      <td mat-cell *matCellDef="let recipe">
        <div class="view-count">
          <mat-icon>visibility</mat-icon>
          {{ recipe.viewCount }}
        </div>
      </td>
    </ng-container>

    <!-- Actions Column -->
    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef>פעולות</th>
      <td mat-cell *matCellDef="let recipe">
        <button
          mat-mini-fab
          color="primary"
          class="view-btn"
          [routerLink]="['/recipes', recipe.id]"
          matTooltip="צפייה במתכון"
        >
          <mat-icon>visibility</mat-icon>
        </button>
        <button
          mat-mini-fab
          color="warn"
          class="delete-btn"
          (click)="deleteRecipe(recipe.id)"
          matTooltip="מחיקת מתכון"
        >
          <mat-icon>delete</mat-icon>
        </button>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>

  <div *ngIf="!loading && recipes.length === 0" class="empty-state">
    לא נמצאו מתכונים במערכת.
  </div>
</div>
